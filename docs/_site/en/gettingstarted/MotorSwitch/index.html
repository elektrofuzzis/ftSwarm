<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>My First Application -</title>
<meta name="description" content="">


  <meta name="author" content="//The ftSwarm Project">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="">
<meta property="og:title" content="My First Application">
<meta property="og:url" content="http://localhost:4000/en/gettingstarted/MotorSwitch/">












  

  


<link rel="canonical" href="http://localhost:4000/en/gettingstarted/MotorSwitch/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "The ftSwarm Project",
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title=" Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--category wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    
<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/img/ftSwarm.svg" alt=""></a>
        
        <a class="site-title" href="/">
          
          
        </a>

        <!-- original stuff 
        <ul class="visible-links"></ul>
        end original stuff-->

        <script>
          function callRef( url ) {
            if ( location.pathname.startsWith('/en/') ) {
              location.href='/en/'+url;
            } else {
              location.href='/de/'+url;
            }
          }
        </script>

        <ul class="visible-links">
          <li class="masthead__menu-item">
            <a href="#" onclick="callRef('gettingstarted/gettingstarted')" title="Tutorial">Tutorial</a>
          </li>
          <li class="masthead__menu-item">
            <a href="#" onclick="callRef('advanced/Configuration')" title="Advanced">Advanced</a>
          </li>
          <li class="masthead__menu-item">
            <a href="#" onclick="callRef('cpp-api/index')" title="api">api</a>
          </li>
          <li class="masthead__menu-item">
            <a href="#" onclick="callRef('faq')" title="FAQ">FAQ</a>
          </li>
        </ul>


        <!-- language picker -->

        <a class="alang" href="#" onclick="location.href=location.href.replace('/de/', '/en/')"><img class="language-picker" src="/assets/img/uk.png"></a>
        <a class="alang" href="#" onclick="location.href=location.href.replace('/en/', '/de/')"><img class="language-picker" src="/assets/img/germany.png"></a>
        
        <!-- language picker -->

        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Tutorial</span>
        

        
        <ul>
          
            <li><a href="/en/gettingstarted/1stftSwarm">ftSwarm</a></li>
          
            <li><a href="/en/gettingstarted/1stftSwarmControl">ftSwarmControl</a></li>
          
            <li><a href="/en/gettingstarted/serial">USB/Serial Connection</a></li>
          
            <li><a href="/en/gettingstarted/WebUI">wifi & status page</a></li>
          
            <li><a href="/en/gettingstarted/ide">Install IDE</a></li>
          
            <li><a href="/en/gettingstarted/MotorSwitch">My First Application</a></li>
          
            <li><a href="/en/gettingstarted/kelda">The Kelda Principle</a></li>
          
            <li><a href="/en/gettingstarted/MotorSwitchSwarm">A first Swarm</a></li>
          
            <li><a href="/en/gettingstarted/switches">Switches & Buttons</a></li>
          
            <li><a href="/en/gettingstarted/MotorSwitchAlias">Alias Names</a></li>
          
            <li><a href="/en/gettingstarted/RemoteControl">Remote Control</a></li>
          
            <li><a href="/en/gettingstarted/EventControlled">Events</a></li>
          
            <li><a href="/en/gettingstarted/FtSwarmPixel">RGB LEDs & FtSwarmPixel</a></li>
          
            <li><a href="/en/gettingstarted/FtSwarmOLED">OLED Display</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <div class="archive">
    
      <h1 id="page-title" class="page__title">My First Application</h1>
    
    <p>The first application is not about writing “Hello World” on a display. It’s just to control a motor with a simple switch. 
Therefore you need a ftSwarm, a switch, a motor or lamp and a 9V power supply.</p>

<p>The hardware setup is easy:</p>

<ul>
  <li>Connect a motor or a lamp to output M2 of your ftSwarm.</li>
  <li>Connect a switch to input A1.</li>
  <li>Connect a 9V power supply to PWR.</li>
  <li>Connect the ftSwarm via USB cable with your computer.</li>
</ul>

<p>Write the following sketch or use the example file <em>MotorSwitch</em>. Upload it to your device. Whenever you press your switch, the motor starts running. If you release the switch, the motor stops.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;ftSwarm.h&gt;
</span>
<span class="n">FtSwarmSwitch</span> <span class="o">*</span><span class="n">sw</span><span class="p">;</span>
<span class="n">FtSwarmMotor</span>  <span class="o">*</span><span class="n">mot</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">(</span> <span class="p">)</span> <span class="p">{</span>

  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>

  <span class="c1">// start the swarm</span>
  <span class="n">FtSwarmSerialNumber_t</span> <span class="n">local</span> <span class="o">=</span> <span class="n">ftSwarm</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span> <span class="p">);</span>
	
  <span class="c1">// get switch and motor instances</span>
  <span class="n">sw</span>  <span class="o">=</span> <span class="k">new</span> <span class="n">FtSwarmSwitch</span><span class="p">(</span> <span class="n">local</span><span class="p">,</span> <span class="n">FTSWARM_A1</span> <span class="p">);</span>
  <span class="n">mot</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FtSwarmMotor</span><span class="p">(</span> <span class="n">local</span><span class="p">,</span> <span class="n">FTSWARM_M2</span> <span class="p">);</span>

<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">(</span> <span class="p">)</span> <span class="p">{</span>

  <span class="c1">// check if switch is pressed or released</span>
  <span class="k">if</span> <span class="p">(</span> <span class="n">sw</span><span class="o">-&gt;</span><span class="n">isPressed</span><span class="p">()</span> <span class="p">)</span>
    <span class="n">mot</span><span class="o">-&gt;</span><span class="n">setSpeed</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
  <span class="k">else</span>
    <span class="n">mot</span><span class="o">-&gt;</span><span class="n">setSpeed</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
	
  <span class="c1">// wait some time</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>

<span class="p">}</span>
</code></pre></div></div>

<p>The Sketch is quite easy to understand.</p>

<p>Like all Arduino-sketches, it uses the main functions <strong><code class="language-plaintext highlighter-rouge">setup</code></strong> and <strong><code class="language-plaintext highlighter-rouge">loop</code></strong>.</p>

<ul>
  <li>When the sketch starts, <strong><code class="language-plaintext highlighter-rouge">setup</code></strong> is called automatically. In standard you initialize your hardware in this function.</li>
  <li>Afterwards <strong><code class="language-plaintext highlighter-rouge">loop</code></strong> starts. If the function stops, the sketch calls it again and again. <strong><code class="language-plaintext highlighter-rouge">loop</code></strong> is used to control you model.</li>
</ul>

<p><strong><code class="language-plaintext highlighter-rouge">#include "ftSwarm.h"</code></strong> includes the ftSwarm-Library to access the ftSwarm firmware. You need it to send some debug and error messages if needed.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
</code></pre></div></div>

<p>Afterwrards the swarm is started:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// start the swarm</span>
<span class="n">FtSwarmSerialNumber</span> <span class="n">local</span> <span class="o">=</span> <span class="n">ftSwarm</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span> <span class="p">);</span>
</code></pre></div></div>

<p>The result is the serial number of your local controller. With this serial number, you could now instantiate <strong><code class="language-plaintext highlighter-rouge">switch</code></strong> and <strong><code class="language-plaintext highlighter-rouge">motor</code></strong>:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sw</span>  <span class="o">=</span> <span class="k">new</span> <span class="nf">FtSwarmSwitch</span><span class="p">(</span> <span class="n">local</span><span class="p">,</span> <span class="n">FTSWARM_A1</span> <span class="p">);</span>
<span class="n">mot</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">FtSwarmMotor</span><span class="p">(</span> <span class="n">local</span><span class="p">,</span> <span class="n">FTSWARM_M2</span> <span class="p">);</span>
</code></pre></div></div>

<p><em>Attention:</em> Due to the architecture of the firmware, you could not access an IO before your swarm is started.
With instantiating an IO, the firmware waits until the IO joins the swarm. If the swarm is not started, your application will wait forever. 
To work with global objects, they need to be defined as pointers. So you are able to instantiate them after starting your swarm.</p>

<p>The main loop is just about querying the switch state and starting/stopping the motor:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span> <span class="n">sw</span><span class="o">-&gt;</span><span class="n">isPressed</span><span class="p">()</span> <span class="p">)</span>
  <span class="n">mot</span><span class="o">-&gt;</span><span class="n">setSpeed</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<span class="k">else</span>
  <span class="n">mot</span><span class="o">-&gt;</span><span class="n">setSpeed</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</code></pre></div></div>



<div class="entries-list">
  
</div>

  </div>
</div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
          <li><a href="https://github.com/elektrofuzzis" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
          <li><a href="https://instagram.com/elektrofuzzies" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i> Instagram</a></li>
        
      
        
          <li><a href="mailto:ftpi@gmx.de" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 The ftSwarm Project. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
